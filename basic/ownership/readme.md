# Rust 中的所有權概念

[參考網址](https://rust-lang.tw/book-tw/ch04-00-understanding-ownership.html)  

所有權可以說是 Rust 最與眾不同的特色，並深深影響著整個語言。這讓 **Rust 不需要垃圾回收（garbage collector）**就可以保障記憶體安全，因此理解 Rust 中的所有權如何運作至關重要。

## 0. 記憶體管理

對於記憶體管理，我們希望程式語言提供兩種功能：

- **安全**：指標絕對不能指向已釋出的物件，這是未定義行為，會導致崩潰與安全漏洞。
- **控制**：讓記憶體能夠在我們選擇的時間迅速釋出，以便控制程式耗用的記憶體。

所有的主要的程式語言，幾乎都屬於上述其一：

- **安全優先**：使用垃圾回收來管理記憶體，當指向某個物件的指標都消失時，它們會自動釋出該物件，這種做法可以消除懸空指標，它們會保留物件直到沒有指標指向它們為止。
  Example：Python、JavaScript、Ruby、Java、C#、Haskell。
- **控制優先**：讓你自己負責釋出記憶體。程式的記憶體使用情況完全由你控制，但避免懸空指標完全由你自己來控制。

## 1. 什麼是所有權？

Rust 選擇了第三種方式：記憶體由所有權系統管理，且編譯器會在編譯時加上一些規則檢查。如果有地方違規的話，程式就無法編譯。這些所有權的規則完全不會降低執行程式的速度。

### 1-1. 堆疊（Stack）與堆積（Heap）

堆疊與堆積都是提供程式碼在執行時能夠使用的記憶體部分，但他們組成的方式卻不一樣。

1. **堆疊**：堆疊會按照取得數值的順序依序存放它